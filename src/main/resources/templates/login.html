<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout :: html}">
<body>
<th:block th:fragment="content">

    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

    <div class="min-h-[80vh] flex items-center justify-center relative overflow-hidden px-4" x-data="{ isLogin: true }">

        <div class="absolute inset-0 opacity-10 pointer-events-none">
            <div class="absolute top-10 right-20 w-64 h-64 accent-gradient rounded-full blur-3xl"></div>
            <div class="absolute bottom-10 left-20 w-96 h-96 bg-purple-500 rounded-full blur-3xl"></div>
        </div>

        <div class="relative z-10 w-full max-w-lg">

            <div th:if="${errore}" class="mb-6 p-6 glass border-l-4 border-red-500 rounded-2xl animate-pulse">
                <div class="flex items-center">
                    <svg class="w-6 h-6 text-red-500 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <span class="text-red-200 font-medium" th:text="${errore}">Errore di autenticazione</span>
                </div>
            </div>

            <div class="glass rounded-3xl p-10 md:p-14 shadow-2xl border border-white/10 relative overflow-hidden">

                <div class="text-center mb-10">
                    <h1 class="text-5xl font-bold mb-4 leading-tight">
                        <span x-show="isLogin">Welcome</span>
                        <span x-show="!isLogin" x-cloak>Join</span>
                        <span class="block accent-gradient bg-clip-text text-transparent">SkyWings</span>
                    </h1>
                    <p class="text-gray-400 text-lg" x-text="isLogin ? 'Access your traveler dashboard' : 'Start your journey with us today'"></p>
                </div>

                <form th:action="@{/login}" method="post" class="space-y-6" x-show="isLogin">
                    <div>
                        <label class="block text-xs uppercase tracking-widest text-gray-400 font-bold mb-3 ml-1">Username</label>
                        <input type="text" name="username" placeholder="e.g. maverick_88" required
                               class="w-full px-6 py-4 bg-white/5 border border-white/10 rounded-2xl focus:ring-2 focus:ring-blue-500 transition-all outline-none text-white placeholder:text-gray-600">
                    </div>

                    <div>
                        <div class="flex justify-between mb-3 ml-1">
                            <label class="block text-xs uppercase tracking-widest text-gray-400 font-bold">Password</label>
                            <a href="#" class="text-xs text-blue-400 hover:text-white transition">Forgot Password?</a>
                        </div>
                        <input type="password" name="password" placeholder="••••••••" required
                               class="w-full px-6 py-4 bg-white/5 border border-white/10 rounded-2xl focus:ring-2 focus:ring-blue-500 transition-all outline-none text-white placeholder:text-gray-600">
                    </div>

                    <button type="submit" class="w-full py-5 bg-blue-600 hover:bg-blue-500 rounded-2xl font-bold text-xl shadow-lg shadow-blue-500/20 transition-all transform hover:-translate-y-1 active:scale-[0.98]">
                        Sign In
                    </button>
                </form>

                <form th:action="@{/register}" method="post" class="space-y-4" x-show="!isLogin" x-cloak style="display: none;">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-[10px] uppercase tracking-widest text-gray-400 font-bold mb-2 ml-1">Nome</label>
                            <input type="text" name="nome" placeholder="Mario" required
                                   class="w-full px-5 py-3 bg-white/5 border border-white/10 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none text-white">
                        </div>
                        <div>
                            <label class="block text-[10px] uppercase tracking-widest text-gray-400 font-bold mb-2 ml-1">Cognome</label>
                            <input type="text" name="cognome" placeholder="Rossi" required
                                   class="w-full px-5 py-3 bg-white/5 border border-white/10 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none text-white">
                        </div>
                    </div>

                    <div>
                        <label class="block text-[10px] uppercase tracking-widest text-gray-400 font-bold mb-2 ml-1">Username</label>
                        <input type="text" name="username" placeholder="supermario" required
                               class="w-full px-5 py-3 bg-white/5 border border-white/10 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none text-white">
                    </div>

                    <div>
                        <label class="block text-[10px] uppercase tracking-widest text-gray-400 font-bold mb-2 ml-1">Email</label>
                        <input type="email" name="email" placeholder="prefix@email.it" required
                               class="w-full px-5 py-3 bg-white/5 border border-white/10 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none text-white">
                    </div>

                    <div>
                        <label class="block text-[10px] uppercase tracking-widest text-gray-400 font-bold mb-2 ml-1">Password</label>
                        <input type="password" name="password" placeholder="••••••••" required
                               class="w-full px-5 py-3 bg-white/5 border border-white/10 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none text-white">
                    </div>

                    <button type="submit" class="w-full py-5 bg-purple-600 hover:bg-purple-500 rounded-2xl font-bold text-xl shadow-lg shadow-purple-500/20 transition-all transform hover:-translate-y-1 mt-4">
                        Create Account
                    </button>
                </form>

                <div class="mt-10 pt-8 border-t border-white/10 text-center">
                    <p class="text-gray-400">
                        <span x-text="isLogin ? 'New to SkyWings?' : 'Already have an account?'"></span>
                        <button type="button" @click="isLogin = !isLogin" class="text-blue-400 font-bold hover:text-white transition ml-2 underline underline-offset-4">
                            <span x-text="isLogin ? 'Create Account' : 'Sign In'"></span>
                        </button>
                    </p>
                </div>
            </div>
        </div>
    </div>

</th:block>
</body>
</html>